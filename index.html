<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>HIV Infection Groupings</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/bubble_chart.css">
</head>
<body>
  <div class="container">
    <div id="vis"></div>
    <div id="toolbar">
      <a href="#" id="All" class="button active">All Patients</a>
      <a href="#" id="Gender" class="button">Group by Gender</a>
      <a href="#" id="Orientation" class="button">Group by Orientation</a>
      <a href="#" id="MSM" class="button">Group by MSM</a>
      <a href="#" id="IDU" class="button">Group by IDU</a>
      <a href="#" id="PreP" class="button">Group by PreP</a>
    </div>
  </div>

  <script src="https://d3js.org/d3.v5.min.js"></script>

  <script type="text/csv" id="fakeinfectedpatients">id,Gender,Orientation,IDU,PreP,MSM
  1,Male,Other,0,1,1
  2,Male,Other,1,1,1
  3,Female,Bi,1,1,0
  4,Female,Other,1,1,0
  5,Male,Gay,0,0,1
  6,Female,Striaght,0,0,0
  7,Male,Striaght,1,0,0
  8,Male,Other,1,1,1
  9,Female,Gay,1,0,0
  10,Male,Gay,0,0,1
  11,Male,Other,0,0,1
  12,Female,Striaght,1,0,0
  13,Male,Striaght,1,1,0
  14,Female,Bi,0,1,0
  15,Male,Gay,0,1,1
  16,Male,Gay,1,0,1
  17,Female,Gay,0,1,0
  18,Male,Gay,1,0,1
  19,Female,Striaght,0,1,0
  20,Male,Bi,0,0,1
  21,Male,Bi,1,1,1
  22,Female,Other,0,1,0
  23,Female,Gay,0,0,0
  24,Male,Other,1,0,1
  25,Female,Bi,0,1,0
  26,Male,Gay,0,0,1
  27,Female,Bi,1,0,0
  28,Male,Striaght,1,0,0
  29,Female,Bi,1,1,0
  30,Male,Bi,0,0,1
  31,Male,Other,1,0,1
  32,Female,Gay,0,0,0
  33,Female,Gay,1,1,0
  34,Female,Bi,1,0,0
  35,Female,Bi,0,1,0
  36,Male,Other,0,0,1
  37,Male,Striaght,0,1,0
  38,Male,Gay,0,0,1
  39,Male,Gay,1,0,1
  40,Male,Striaght,0,0,0
  41,Female,Striaght,0,1,0
  42,Male,Striaght,0,0,0
  43,Female,Striaght,0,1,0
  44,Female,Striaght,1,1,0
  45,Male,Bi,1,0,1
  46,Female,Bi,1,1,0
  47,Female,Striaght,1,0,0
  48,Male,Other,1,0,1
  49,Male,Bi,0,1,1
  50,Male,Striaght,0,0,0
  51,Male,Bi,0,0,1
  52,Female,Bi,0,1,0
  53,Female,Gay,1,1,0
  54,Male,Gay,0,1,1
  55,Female,Striaght,1,0,0
  56,Male,Striaght,1,1,0
  57,Male,Striaght,0,1,0
  58,Male,Gay,1,0,1
  59,Female,Striaght,1,1,0
  60,Female,Gay,1,1,0
  61,Female,Gay,1,0,0
  62,Male,Striaght,1,1,0
  63,Male,Gay,0,1,1
  64,Female,Bi,0,0,0
  65,Female,Gay,0,0,0
  66,Male,Other,0,0,1
  67,Male,Other,1,0,1
  68,Male,Striaght,0,1,0
  69,Male,Striaght,1,1,0
  70,Male,Bi,0,0,1
  71,Male,Bi,0,1,1
  72,Female,Bi,0,0,0
  73,Female,Other,1,0,0
  74,Female,Other,0,0,0
  75,Male,Striaght,1,1,0
  76,Male,Gay,1,1,1
  77,Female,Other,0,1,0
  78,Male,Bi,0,0,1
  79,Male,Other,1,1,1
  80,Female,Bi,1,0,0
  81,Female,Other,1,1,0
  82,Male,Striaght,0,0,0
  83,Female,Striaght,0,1,0
  84,Male,Striaght,1,1,0
  85,Male,Striaght,0,0,0
  86,Male,Gay,1,0,1
  87,Male,Bi,0,1,1
  88,Male,Striaght,0,1,0
  89,Female,Bi,1,1,0
  90,Female,Striaght,0,0,0
  91,Male,Other,0,0,1
  92,Male,Striaght,0,0,0
  93,Female,Striaght,0,0,0
  94,Male,Other,1,0,1
  95,Male,Bi,1,0,1
  96,Male,Gay,0,0,1
  97,Female,Striaght,0,1,0
  98,Male,Bi,0,1,1
  99,Female,Bi,1,0,0
  100,Male,Other,0,0,1
  101,Male,Striaght,0,0,0
  102,Male,Bi,0,0,1
  103,Female,Striaght,0,0,0
  104,Male,Striaght,1,0,0
  105,Male,Other,0,1,1
  106,Female,Bi,0,1,0
  107,Male,Other,0,0,1
  108,Female,Gay,0,1,0
  109,Male,Other,0,0,1
  110,Female,Gay,1,0,0
  111,Male,Striaght,0,0,0
  112,Female,Striaght,0,0,0
  113,Male,Gay,1,1,1
  114,Male,Striaght,1,1,0
  115,Female,Striaght,1,0,0
  116,Male,Other,0,1,1
  117,Female,Other,1,1,0
  118,Male,Striaght,1,0,0
  119,Female,Bi,1,1,0
  120,Female,Striaght,1,1,0
  121,Male,Gay,1,1,1
  122,Male,Bi,0,1,1
  123,Female,Other,0,0,0
  124,Male,Gay,0,1,1
  125,Male,Bi,0,0,1
  126,Male,Striaght,0,0,0
  127,Male,Bi,0,1,1
  128,Female,Other,0,1,0
  129,Female,Gay,1,0,0
  130,Female,Striaght,1,1,0
  131,Female,Other,1,1,0
  132,Female,Other,0,0,0
  133,Female,Other,1,0,0
  134,Male,Gay,0,1,1
  135,Male,Striaght,1,0,0
  136,Female,Other,1,1,0
  137,Male,Gay,0,1,1
  138,Male,Gay,0,0,1
  139,Male,Striaght,0,1,0
  140,Male,Gay,0,1,1
  141,Male,Other,0,1,1
  142,Female,Gay,0,0,0
  143,Male,Bi,1,0,1
  144,Male,Striaght,1,0,0
  145,Male,Other,0,1,1
  146,Female,Gay,1,0,0
  147,Male,Other,1,0,1
  148,Female,Gay,0,1,0
  149,Female,Gay,0,1,0
  150,Male,Striaght,1,0,0
  151,Male,Bi,1,0,1
  152,Female,Striaght,0,0,0
  153,Male,Other,1,0,1
  154,Male,Other,0,0,1
  155,Female,Striaght,0,1,0
  156,Male,Striaght,0,0,0
  157,Female,Other,0,1,0
  158,Male,Striaght,1,0,0
  159,Male,Striaght,1,1,0
  160,Female,Gay,1,0,0
  161,Male,Gay,0,0,1
  162,Female,Gay,0,1,0
  163,Female,Other,0,0,0
  164,Female,Other,0,1,0
  165,Female,Gay,0,0,0
  166,Male,Striaght,0,0,0
  167,Male,Gay,0,1,1
  168,Male,Other,1,1,1
  169,Female,Gay,1,1,0
  170,Male,Bi,0,0,1
  171,Female,Bi,0,0,0
  172,Male,Other,0,0,1
  173,Male,Striaght,1,0,0
  174,Male,Bi,0,1,1
  175,Female,Other,1,0,0
  176,Female,Bi,1,1,0
  177,Female,Bi,0,0,0
  178,Female,Other,0,1,0
  179,Male,Gay,0,1,1
  180,Female,Striaght,1,0,0
  181,Male,Gay,0,0,1
  182,Female,Other,1,1,0
  183,Female,Striaght,0,1,0
  184,Female,Other,0,1,0
  185,Male,Other,0,1,1
  186,Female,Striaght,0,1,0
  187,Male,Gay,1,1,1
  188,Female,Other,0,0,0
  189,Female,Gay,1,1,0
  190,Female,Bi,0,1,0
  191,Female,Gay,0,0,0
  192,Male,Gay,0,0,1
  193,Male,Striaght,1,1,0
  194,Male,Gay,0,0,1
  195,Female,Other,0,0,0
  196,Male,Bi,1,1,1
  197,Female,Other,0,0,0
  198,Female,Gay,0,0,0
  199,Female,Other,1,1,0
  200,Female,Other,1,1,0
  201,Male,Striaght,0,0,0
  202,Male,Striaght,0,1,0
  203,Male,Gay,0,1,1
  204,Female,Bi,1,1,0
  205,Female,Gay,1,0,0
  206,Female,Bi,0,0,0
  207,Female,Striaght,0,1,0
  208,Female,Bi,1,0,0
  209,Female,Bi,0,0,0
  210,Female,Gay,1,0,0
  211,Female,Bi,0,0,0
  212,Female,Other,0,0,0
  213,Male,Bi,0,0,1
  214,Male,Other,1,0,1
  215,Female,Striaght,0,0,0
  216,Male,Bi,1,1,1
  217,Male,Striaght,0,1,0
  218,Male,Striaght,1,1,0
  219,Female,Bi,0,0,0
  220,Female,Gay,0,1,0
  221,Female,Gay,0,1,0
  222,Female,Bi,0,1,0
  223,Female,Other,1,1,0
  224,Female,Bi,0,0,0
  225,Female,Other,1,0,0
  226,Male,Gay,1,0,1
  227,Male,Bi,0,0,1
  228,Male,Gay,1,0,1
  229,Female,Bi,0,1,0
  230,Male,Other,0,0,1
  231,Male,Other,1,1,1
  232,Male,Striaght,0,0,0
  233,Female,Gay,0,1,0
  234,Female,Gay,1,0,0
  235,Female,Gay,0,0,0
  236,Female,Striaght,0,1,0
  237,Male,Gay,0,0,1
  238,Male,Other,1,0,1
  239,Male,Other,0,1,1
  240,Male,Bi,0,1,1
  241,Male,Bi,0,0,1
  242,Male,Other,1,1,1
  243,Female,Bi,1,0,0
  244,Male,Gay,0,1,1
  245,Male,Striaght,0,1,0
  246,Female,Gay,1,0,0
  247,Female,Gay,0,1,0
  248,Male,Bi,1,0,1
  249,Female,Gay,0,0,0
  250,Female,Striaght,1,1,0
  251,Female,Other,1,0,0
  252,Male,Bi,0,1,1
  253,Male,Bi,0,0,1
  254,Female,Bi,1,0,0
  255,Female,Bi,0,1,0
  256,Male,Bi,0,1,1
  257,Female,Bi,1,0,0
  258,Male,Bi,0,1,1
  259,Female,Gay,0,1,0
  260,Female,Striaght,0,1,0
  261,Female,Bi,1,0,0
  262,Male,Other,0,1,1
  263,Male,Gay,1,1,1
  264,Male,Bi,0,0,1
  265,Female,Striaght,1,0,0
  266,Male,Other,0,1,1
  267,Male,Bi,0,0,1
  268,Male,Striaght,1,1,0
  269,Female,Other,1,1,0
  270,Female,Other,0,0,0
  271,Male,Other,1,1,1
  272,Female,Gay,0,0,0
  273,Female,Striaght,1,0,0
  274,Female,Bi,0,0,0
  275,Male,Striaght,1,1,0
  276,Male,Bi,0,1,1
  277,Male,Striaght,0,0,0
  278,Male,Striaght,1,1,0
  279,Male,Bi,1,1,1
  280,Male,Gay,0,0,1
  281,Female,Other,1,0,0
  282,Female,Bi,1,0,0
  283,Male,Other,1,1,1
  284,Male,Gay,1,0,1
  285,Female,Striaght,0,1,0
  286,Female,Bi,1,1,0
  287,Female,Bi,1,0,0
  288,Female,Other,1,0,0
  289,Female,Other,0,1,0
  290,Female,Striaght,1,0,0
  291,Male,Other,1,1,1
  292,Male,Striaght,0,0,0
  293,Male,Gay,1,1,1
  294,Male,Other,0,0,1
  295,Male,Other,0,1,1
  296,Male,Gay,1,1,1
  297,Male,Striaght,1,0,0
  298,Female,Bi,1,0,0
  299,Male,Gay,0,0,1
  300,Male,Striaght,1,1,0
  301,Male,Other,1,1,1
  302,Male,Other,0,1,1
  303,Female,Bi,1,1,0
  304,Female,Bi,1,0,0
  305,Male,Other,1,0,1
  306,Female,Bi,0,0,0
  307,Female,Striaght,0,1,0
  308,Female,Striaght,1,1,0
  309,Female,Other,1,0,0
  310,Female,Bi,0,1,0
  311,Male,Striaght,1,1,0
  312,Female,Bi,1,0,0
  313,Male,Striaght,1,0,0
  314,Male,Other,1,1,1
  315,Female,Bi,0,1,0
  316,Female,Bi,0,0,0
  317,Female,Other,0,1,0
  318,Female,Striaght,1,0,0
  319,Male,Gay,0,0,1
  320,Male,Gay,1,1,1
  321,Male,Bi,0,0,1
  322,Male,Other,1,1,1
  323,Male,Other,1,0,1
  324,Female,Gay,1,0,0
  325,Female,Gay,1,0,0
  326,Female,Striaght,1,0,0
  327,Male,Bi,1,0,1
  328,Female,Bi,0,0,0
  329,Male,Other,1,1,1
  330,Male,Gay,0,1,1
  331,Female,Bi,1,0,0
  332,Female,Other,1,1,0
  333,Female,Other,1,0,0
  334,Female,Gay,1,0,0
  335,Female,Other,1,1,0
  336,Male,Striaght,0,1,0
  337,Male,Gay,1,1,1
  338,Female,Striaght,1,0,0
  339,Female,Other,0,0,0
  340,Female,Striaght,1,1,0
  341,Male,Other,1,0,1
  342,Male,Gay,0,0,1
  343,Female,Bi,0,1,0
  344,Male,Striaght,1,1,0
  345,Male,Striaght,1,0,0
  346,Female,Other,1,0,0
  347,Female,Other,0,0,0
  348,Male,Other,1,1,1
  349,Male,Gay,1,1,1
  350,Male,Other,0,1,1
  351,Female,Bi,0,1,0
  352,Male,Bi,0,0,1
  353,Male,Bi,0,1,1
  354,Female,Striaght,1,0,0
  355,Male,Striaght,0,1,0
  356,Male,Striaght,1,0,0
  357,Female,Striaght,1,0,0
  358,Male,Striaght,1,0,0
  359,Male,Striaght,1,0,0
  360,Female,Bi,1,1,0
  361,Male,Striaght,1,1,0
  362,Male,Bi,0,0,1
  363,Male,Other,1,0,1
  364,Female,Striaght,0,0,0
  365,Male,Gay,1,0,1
  366,Female,Other,0,0,0
  367,Female,Other,0,1,0
  368,Male,Bi,1,0,1
  369,Male,Other,0,0,1
  370,Female,Striaght,1,1,0
  371,Female,Bi,1,0,0
  372,Female,Gay,1,0,0
  373,Male,Striaght,1,0,0
  374,Male,Other,1,1,1
  375,Female,Other,1,1,0
  376,Male,Other,1,0,1
  377,Male,Bi,1,0,1
  378,Female,Other,0,1,0
  379,Female,Other,0,1,0
  380,Female,Gay,1,1,0
  381,Female,Gay,0,0,0
  382,Male,Striaght,0,0,0
  383,Male,Bi,1,0,1
  384,Female,Other,1,0,0
  385,Male,Gay,0,0,1
  386,Female,Gay,1,1,0
  387,Male,Bi,0,0,1
  388,Male,Striaght,1,0,0
  389,Male,Striaght,1,1,0
  390,Male,Bi,1,1,1
  391,Male,Other,1,0,1
  392,Male,Gay,0,0,1
  393,Female,Other,0,0,0
  394,Male,Gay,1,1,1
  395,Female,Gay,0,1,0
  396,Male,Striaght,0,1,0
  397,Male,Bi,1,1,1
  398,Female,Bi,1,1,0
  399,Female,Bi,1,1,0
  400,Female,Other,1,1,0
  401,Female,Other,0,0,0
  402,Male,Gay,0,1,1
  403,Male,Other,1,0,1
  404,Male,Other,0,1,1
  405,Female,Other,1,0,0
  406,Female,Gay,0,1,0
  407,Female,Bi,1,1,0
  408,Female,Other,0,0,0
  409,Male,Bi,1,1,1
  410,Male,Bi,1,1,1
  411,Male,Other,1,0,1
  412,Male,Other,0,0,1
  413,Female,Gay,0,1,0
  414,Female,Bi,1,1,0
  415,Female,Other,1,0,0
  416,Female,Striaght,1,0,0
  417,Female,Other,1,0,0
  418,Female,Gay,0,1,0
  419,Male,Other,1,0,1
  420,Male,Bi,0,1,1
  421,Male,Bi,1,1,1
  422,Male,Bi,0,0,1
  423,Female,Striaght,0,1,0
  424,Male,Gay,0,0,1
  425,Male,Other,0,1,1
  426,Female,Other,0,0,0
  427,Female,Striaght,0,0,0
  428,Male,Other,1,0,1
  429,Female,Bi,1,0,0
  430,Male,Other,1,1,1
  431,Male,Bi,0,1,1
  432,Female,Bi,1,1,0
  433,Female,Gay,1,0,0
  434,Female,Bi,1,0,0
  435,Female,Striaght,0,0,0
  436,Female,Striaght,0,0,0
  437,Female,Striaght,1,0,0
  438,Female,Bi,0,1,0
  439,Male,Gay,1,0,1
  440,Female,Gay,0,1,0
  441,Male,Striaght,1,0,0
  442,Female,Striaght,0,0,0
  443,Female,Other,0,0,0
  444,Female,Gay,1,0,0
  445,Female,Gay,0,1,0
  446,Female,Bi,1,1,0
  447,Female,Gay,1,0,0
  448,Female,Gay,1,1,0
  449,Female,Striaght,0,1,0
  450,Female,Bi,1,0,0
  451,Male,Other,1,0,1
  452,Female,Striaght,0,1,0
  453,Female,Gay,0,0,0
  454,Female,Other,0,0,0
  455,Female,Gay,0,0,0
  456,Male,Gay,1,0,1
  457,Male,Bi,1,1,1
  458,Male,Gay,0,0,1
  459,Male,Gay,0,1,1
  460,Female,Gay,0,1,0
  461,Male,Other,1,0,1
  462,Male,Bi,1,1,1
  463,Male,Bi,1,0,1
  464,Male,Striaght,0,0,0
  465,Male,Striaght,1,0,0
  466,Male,Bi,0,0,1
  467,Female,Gay,0,0,0
  468,Female,Striaght,0,0,0
  469,Male,Other,1,0,1
  470,Male,Other,1,0,1
  471,Female,Other,0,0,0
  472,Male,Other,1,0,1
  473,Male,Gay,1,1,1
  474,Female,Bi,1,1,0
  475,Female,Gay,1,0,0
  476,Female,Bi,0,1,0
  477,Female,Gay,0,0,0
  478,Male,Other,1,0,1
  479,Male,Bi,1,0,1
  480,Male,Bi,0,1,1
  481,Male,Bi,1,0,1
  482,Male,Gay,1,0,1
  483,Male,Striaght,1,1,0
  484,Female,Bi,1,0,0
  485,Female,Gay,1,0,0
  486,Male,Gay,1,0,1
  487,Male,Other,1,0,1
  488,Female,Bi,0,0,0
  489,Female,Bi,1,1,0
  490,Male,Bi,1,1,1
  491,Male,Bi,0,0,1
  492,Male,Bi,0,0,1
  493,Male,Other,1,1,1
  494,Female,Other,0,1,0
  495,Male,Bi,1,1,1
  496,Male,Bi,1,0,1
  497,Female,Gay,1,1,0
  498,Female,Striaght,0,0,0
  499,Male,Gay,0,0,1
  500,Male,Other,0,0,1
  501,Male,Striaght,0,1,0
  502,Male,Gay,1,1,1
  503,Female,Striaght,1,0,0
  504,Female,Bi,1,1,0
  505,Female,Other,1,1,0
  506,Male,Striaght,0,0,0
  507,Female,Other,0,1,0
  508,Male,Other,0,0,1
  509,Female,Gay,1,0,0
  510,Male,Bi,1,1,1
  511,Female,Striaght,0,1,0
  512,Female,Gay,0,0,0
  513,Female,Striaght,0,1,0
  514,Male,Bi,1,1,1
  515,Male,Gay,0,0,1
  516,Female,Bi,0,1,0
  517,Male,Gay,0,0,1
  518,Female,Bi,1,0,0
  519,Male,Other,0,0,1
  520,Female,Other,0,1,0
  521,Female,Bi,1,1,0
  522,Female,Other,0,1,0
  523,Female,Bi,0,0,0
  524,Female,Gay,1,1,0
  525,Female,Other,0,0,0
  526,Female,Striaght,1,0,0
  527,Female,Other,1,1,0
  528,Female,Striaght,1,0,0
  529,Female,Bi,0,1,0
  530,Female,Other,1,0,0
  531,Female,Bi,0,1,0
  532,Female,Striaght,1,0,0
  533,Female,Gay,1,0,0
  534,Male,Other,1,0,1
  535,Male,Bi,1,1,1
  536,Male,Gay,0,1,1
  537,Female,Other,0,1,0
  538,Female,Gay,0,1,0
  539,Female,Other,0,1,0
  540,Female,Other,0,1,0
  541,Female,Striaght,0,0,0
  542,Male,Bi,0,1,1
  543,Male,Bi,0,0,1
  544,Female,Striaght,0,0,0
  545,Male,Striaght,1,0,0
  546,Male,Other,0,0,1
  547,Male,Other,1,1,1
  548,Male,Other,1,1,1
  549,Male,Striaght,0,1,0
  550,Female,Gay,1,1,0
  551,Male,Gay,0,0,1
  552,Female,Bi,0,0,0
  553,Male,Gay,1,1,1
  554,Male,Striaght,0,1,0
  555,Female,Other,1,0,0
  556,Female,Gay,1,1,0
  557,Male,Gay,0,1,1
  558,Female,Bi,0,1,0
  559,Male,Striaght,1,0,0
  560,Female,Gay,1,1,0
  561,Female,Bi,1,1,0
  562,Female,Striaght,0,0,0
  563,Female,Gay,1,1,0
  564,Female,Striaght,0,1,0
  565,Female,Gay,1,0,0
  566,Male,Bi,0,0,1
  567,Female,Striaght,0,1,0
  568,Male,Striaght,1,1,0
  569,Female,Bi,1,1,0
  570,Female,Gay,0,0,0
  571,Female,Striaght,1,1,0
  572,Female,Gay,0,0,0
  573,Female,Striaght,0,0,0
  574,Male,Striaght,1,1,0
  575,Male,Striaght,1,1,0
  576,Male,Gay,1,0,1
  577,Male,Gay,0,1,1
  578,Male,Other,0,0,1
  579,Male,Gay,0,0,1
  580,Female,Bi,1,1,0
  581,Female,Striaght,0,1,0
  582,Female,Bi,0,1,0
  583,Male,Bi,0,1,1
  584,Male,Gay,0,0,1
  585,Male,Bi,0,0,1
  586,Male,Bi,1,0,1
  587,Male,Striaght,0,1,0
  588,Female,Bi,0,0,0
  589,Female,Gay,0,0,0
  590,Male,Other,1,0,1
  591,Male,Striaght,0,0,0
  592,Female,Bi,1,1,0
  593,Female,Other,1,0,0
  594,Female,Bi,0,1,0
  595,Male,Striaght,0,0,0
  596,Female,Gay,0,0,0
  597,Male,Striaght,0,1,0
  598,Female,Other,1,0,0
  599,Male,Bi,1,0,1
  600,Male,Gay,0,0,1
  601,Male,Other,0,1,1
  602,Male,Bi,0,0,1
  603,Male,Striaght,1,0,0
  604,Female,Other,1,1,0
  605,Female,Other,0,1,0
  606,Female,Striaght,0,0,0
  607,Male,Gay,1,1,1
  608,Female,Gay,1,0,0
  609,Male,Gay,0,0,1
  610,Male,Other,1,0,1
  611,Male,Bi,0,0,1
  612,Female,Striaght,1,1,0
  613,Male,Other,0,0,1
  614,Male,Gay,1,0,1
  615,Male,Striaght,0,1,0
  616,Male,Other,0,1,1
  617,Male,Gay,0,1,1
  618,Male,Other,0,1,1
  619,Male,Other,1,1,1
  620,Female,Striaght,0,0,0
  621,Female,Gay,1,0,0
  622,Female,Striaght,1,1,0
  623,Male,Other,0,1,1
  624,Female,Other,0,1,0
  625,Female,Striaght,1,0,0
  626,Female,Bi,0,1,0
  627,Female,Other,0,0,0
  628,Male,Striaght,0,1,0
  629,Male,Bi,1,1,1
  630,Male,Other,0,1,1
  631,Female,Bi,1,1,0
  632,Female,Bi,1,0,0
  633,Female,Other,1,1,0
  634,Male,Other,0,0,1
  635,Male,Bi,0,0,1
  636,Female,Striaght,1,0,0
  637,Male,Striaght,1,0,0
  638,Female,Bi,0,0,0
  639,Male,Bi,1,0,1
  640,Female,Gay,0,1,0
  641,Female,Gay,1,0,0
  642,Male,Bi,1,0,1
  643,Female,Gay,1,0,0
  644,Male,Gay,1,1,1
  645,Male,Striaght,0,1,0
  646,Male,Striaght,1,1,0
  647,Female,Gay,1,1,0
  648,Female,Striaght,1,1,0
  649,Female,Other,0,0,0
  650,Female,Bi,0,0,0
  651,Male,Other,0,0,1
  652,Male,Bi,1,1,1
  653,Female,Gay,1,1,0
  654,Male,Bi,1,0,1
  655,Male,Other,0,0,1
  656,Female,Gay,0,1,0
  657,Male,Gay,1,1,1
  658,Male,Bi,1,0,1
  659,Male,Other,1,1,1
  660,Female,Striaght,1,1,0
  661,Male,Bi,1,1,1
  662,Female,Striaght,1,1,0
  663,Male,Other,1,1,1
  664,Male,Other,1,1,1
  665,Male,Striaght,0,1,0
  666,Male,Striaght,0,1,0
  667,Female,Striaght,0,1,0
  668,Female,Gay,1,1,0
  669,Female,Other,1,1,0
  670,Female,Other,1,1,0
  671,Male,Other,0,0,1
  672,Female,Bi,1,0,0
  673,Female,Bi,0,0,0
  674,Male,Striaght,1,0,0
  675,Female,Other,1,1,0
  676,Female,Other,0,1,0
  677,Male,Striaght,1,1,0
  678,Male,Other,1,0,1
  679,Male,Striaght,0,1,0
  680,Male,Bi,0,0,1
  681,Female,Other,0,0,0
  682,Female,Striaght,0,1,0
  683,Female,Bi,0,0,0
  684,Male,Striaght,1,0,0
  685,Male,Other,0,1,1
  686,Male,Bi,1,0,1
  687,Female,Other,0,0,0
  688,Female,Gay,0,1,0
  689,Male,Bi,1,0,1
  690,Female,Striaght,1,0,0
  691,Male,Other,0,1,1
  692,Male,Gay,1,1,1
  693,Male,Gay,1,1,1
  694,Female,Other,1,0,0
  695,Male,Striaght,1,1,0
  696,Female,Other,0,0,0
  697,Female,Other,0,1,0
  698,Male,Gay,1,1,1
  699,Male,Bi,0,1,1
  700,Male,Striaght,0,0,0
  701,Female,Striaght,0,0,0
  702,Male,Other,1,1,1
  703,Female,Other,1,1,0
  704,Male,Bi,0,0,1
  705,Female,Bi,1,1,0
  706,Female,Other,1,0,0
  707,Female,Bi,0,1,0
  708,Female,Other,0,0,0
  709,Female,Striaght,0,0,0
  710,Male,Gay,1,1,1
  711,Female,Gay,0,1,0
  712,Female,Gay,0,1,0
  713,Female,Striaght,1,0,0
  714,Female,Bi,1,0,0
  715,Male,Gay,1,0,1
  716,Female,Bi,1,0,0
  717,Male,Striaght,1,1,0
  718,Female,Bi,0,0,0
  719,Male,Bi,0,0,1
  720,Male,Gay,1,1,1
  721,Female,Gay,1,0,0
  722,Female,Other,0,1,0
  723,Female,Bi,1,0,0
  724,Female,Striaght,1,0,0
  725,Female,Striaght,1,0,0
  726,Male,Gay,1,0,1
  727,Male,Gay,0,1,1
  728,Female,Striaght,0,1,0
  729,Male,Striaght,0,1,0
  730,Female,Striaght,1,0,0
  731,Male,Gay,0,0,1
  732,Female,Gay,0,1,0
  733,Female,Other,1,1,0
  734,Female,Other,0,1,0
  735,Female,Other,1,0,0
  736,Female,Striaght,0,1,0
  737,Male,Striaght,1,0,0
  738,Male,Bi,1,1,1
  739,Female,Striaght,1,0,0
  740,Female,Striaght,0,1,0
  741,Female,Other,0,0,0
  742,Female,Other,1,1,0
  743,Female,Gay,0,1,0
  744,Male,Gay,0,0,1
  745,Female,Gay,1,1,0
  746,Female,Other,1,0,0
  747,Female,Gay,1,0,0
  748,Male,Bi,1,1,1
  749,Male,Gay,0,1,1
  750,Female,Gay,0,1,0
  751,Female,Striaght,0,0,0
  752,Male,Striaght,0,1,0
  753,Male,Bi,0,1,1
  754,Female,Striaght,1,0,0
  755,Female,Bi,0,1,0
  756,Male,Bi,1,0,1
  757,Male,Gay,0,1,1
  758,Female,Other,0,0,0
  759,Male,Bi,0,1,1
  760,Male,Bi,1,1,1
  761,Male,Other,0,0,1
  762,Female,Other,1,0,0
  763,Female,Bi,1,0,0
  764,Male,Bi,1,0,1
  765,Female,Other,1,1,0
  766,Female,Other,0,1,0
  767,Male,Gay,0,0,1
  768,Male,Bi,0,0,1
  769,Female,Other,1,1,0
  770,Female,Bi,1,0,0
  771,Male,Bi,0,1,1
  772,Female,Bi,1,1,0
  773,Female,Other,0,0,0
  774,Female,Bi,0,1,0
  775,Female,Striaght,1,1,0
  776,Male,Striaght,1,1,0
  777,Male,Gay,1,1,1
  778,Female,Bi,0,0,0
  779,Male,Other,0,1,1
  780,Female,Gay,1,1,0
  781,Female,Striaght,0,0,0
  782,Male,Other,0,0,1
  783,Female,Bi,1,1,0
  784,Male,Other,1,1,1
  785,Male,Gay,0,1,1
  786,Male,Other,1,0,1
  787,Male,Other,1,0,1
  788,Female,Striaght,0,1,0
  789,Female,Other,0,0,0
  790,Male,Other,0,0,1
  791,Male,Striaght,0,0,0
  792,Male,Other,0,0,1
  793,Female,Other,1,0,0
  794,Male,Striaght,1,0,0
  795,Female,Striaght,0,1,0
  796,Male,Other,1,0,1
  797,Male,Bi,1,1,1
  798,Male,Striaght,1,1,0
  799,Male,Striaght,0,0,0
  800,Male,Gay,1,1,1
  801,Male,Other,0,1,1
  802,Female,Other,1,1,0
  803,Female,Gay,1,0,0
  804,Female,Bi,1,1,0
  805,Male,Striaght,1,0,0
  806,Female,Striaght,1,1,0
  807,Male,Other,1,0,1
  808,Male,Other,1,1,1
  809,Male,Striaght,0,0,0
  810,Male,Bi,1,1,1
  811,Male,Bi,0,0,1
  812,Male,Gay,0,1,1
  813,Female,Bi,0,0,0
  814,Female,Gay,0,0,0
  815,Male,Other,1,1,1
  816,Male,Striaght,0,0,0
  817,Female,Bi,1,1,0
  818,Male,Gay,1,1,1
  819,Female,Bi,0,1,0
  820,Male,Other,0,1,1
  821,Female,Bi,0,1,0
  822,Male,Gay,1,1,1
  823,Female,Other,0,0,0
  824,Male,Striaght,0,0,0
  825,Female,Bi,0,0,0
  826,Female,Bi,0,1,0
  827,Male,Other,0,1,1
  828,Male,Other,1,1,1
  829,Male,Striaght,0,1,0
  830,Female,Other,1,1,0
  831,Female,Striaght,0,0,0
  832,Female,Gay,0,0,0
  833,Male,Gay,0,0,1
  834,Male,Bi,0,0,1
  835,Female,Gay,0,0,0
  836,Male,Bi,0,0,1
  837,Male,Striaght,0,1,0
  838,Female,Striaght,1,1,0
  839,Female,Gay,0,1,0
  840,Female,Other,0,0,0
  841,Male,Other,1,0,1
  842,Male,Other,0,1,1
  843,Male,Bi,1,1,1
  844,Male,Gay,1,1,1
  845,Female,Bi,1,1,0
  846,Male,Striaght,1,1,0
  847,Male,Bi,1,1,1
  848,Male,Striaght,0,1,0
  849,Male,Bi,0,1,1
  850,Male,Gay,0,1,1
  851,Male,Other,0,1,1
  852,Female,Gay,1,1,0
  853,Male,Other,1,0,1
  854,Female,Striaght,1,0,0
  855,Male,Gay,0,0,1
  856,Male,Striaght,0,1,0
  857,Female,Other,1,1,0
  858,Female,Bi,1,0,0
  859,Female,Bi,0,1,0
  860,Female,Gay,1,1,0
  861,Male,Other,1,0,1
  862,Male,Striaght,0,1,0
  863,Male,Bi,1,0,1
  864,Female,Bi,0,1,0
  865,Female,Gay,1,0,0
  866,Male,Bi,1,0,1
  867,Female,Bi,1,0,0
  868,Male,Gay,1,1,1
  869,Male,Striaght,0,1,0
  870,Male,Gay,1,1,1
  871,Male,Other,1,1,1
  872,Male,Bi,1,0,1
  873,Male,Bi,1,1,1
  874,Male,Other,1,0,1
  875,Female,Gay,1,0,0
  876,Female,Other,0,1,0
  877,Female,Bi,0,0,0
  878,Female,Gay,1,0,0
  879,Male,Gay,0,1,1
  880,Male,Gay,1,1,1
  881,Male,Striaght,1,1,0
  882,Female,Gay,1,1,0
  883,Female,Gay,0,0,0
  884,Male,Gay,1,1,1
  885,Male,Other,0,1,1
  886,Male,Striaght,1,0,0
  887,Female,Other,0,0,0
  888,Male,Other,1,0,1
  889,Female,Gay,0,1,0
  890,Female,Bi,0,1,0
  891,Male,Gay,0,0,1
  892,Female,Gay,1,1,0
  893,Female,Striaght,1,0,0
  894,Male,Gay,1,0,1
  895,Male,Striaght,0,0,0
  896,Female,Other,1,0,0
  897,Male,Bi,1,0,1
  898,Male,Gay,0,0,1
  899,Male,Gay,1,1,1
  900,Male,Other,0,1,1
  901,Female,Gay,1,1,0
  902,Female,Other,1,0,0
  903,Male,Bi,0,0,1
  904,Male,Striaght,0,1,0
  905,Female,Gay,0,1,0
  906,Female,Bi,0,0,0
  907,Female,Gay,1,1,0
  908,Female,Gay,0,0,0
  909,Female,Other,0,0,0
  910,Female,Other,1,1,0
  911,Male,Other,0,1,1
  912,Female,Gay,1,0,0
  913,Male,Other,1,1,1
  914,Female,Bi,1,0,0
  915,Female,Striaght,1,0,0
  916,Male,Striaght,0,1,0
  917,Male,Gay,0,1,1
  918,Female,Other,0,0,0
  919,Female,Bi,0,1,0
  920,Female,Striaght,1,1,0
  921,Female,Striaght,1,1,0
  922,Female,Other,1,0,0
  923,Female,Bi,1,1,0
  924,Female,Striaght,1,1,0
  925,Female,Other,1,1,0
  926,Female,Bi,1,0,0
  927,Male,Gay,0,1,1
  928,Female,Striaght,1,0,0
  929,Male,Gay,0,0,1
  930,Female,Other,0,0,0
  931,Male,Gay,1,0,1
  932,Female,Striaght,1,1,0
  933,Male,Striaght,0,1,0
  934,Male,Striaght,1,0,0
  935,Male,Bi,0,1,1
  936,Female,Striaght,1,0,0
  937,Male,Gay,0,0,1
  938,Female,Gay,1,1,0
  939,Male,Other,1,1,1
  940,Male,Other,0,1,1
  941,Male,Other,1,1,1
  942,Male,Bi,0,1,1
  943,Male,Gay,0,0,1
  944,Female,Bi,0,0,0
  945,Female,Striaght,0,0,0
  946,Female,Other,0,0,0
  947,Male,Striaght,0,0,0
  948,Male,Striaght,1,1,0
  949,Female,Bi,0,0,0
  950,Male,Gay,1,0,1
  951,Male,Other,1,0,1
  952,Female,Other,1,1,0
  953,Female,Striaght,0,1,0
  954,Male,Gay,1,1,1
  955,Male,Gay,1,1,1
  956,Female,Bi,1,0,0
  957,Female,Striaght,1,1,0
  958,Female,Gay,0,1,0
  959,Male,Gay,1,0,1
  960,Male,Striaght,1,0,0
  961,Female,Striaght,1,0,0
  962,Female,Bi,1,0,0
  963,Male,Other,1,1,1
  964,Female,Striaght,1,1,0
  965,Male,Striaght,1,0,0
  966,Female,Other,0,0,0
  967,Male,Striaght,0,0,0
  968,Female,Bi,0,0,0
  969,Male,Striaght,0,0,0
  970,Male,Gay,1,0,1
  971,Female,Bi,1,0,0
  972,Female,Bi,1,0,0
  973,Female,Bi,1,1,0
  974,Male,Bi,0,0,1
  975,Female,Other,0,1,0
  976,Female,Gay,1,1,0
  977,Male,Striaght,1,1,0
  978,Female,Striaght,0,1,0
  979,Female,Other,0,1,0
  980,Male,Gay,0,1,1
  981,Male,Striaght,1,0,0
  982,Female,Striaght,0,1,0
  983,Female,Bi,1,0,0
  984,Male,Gay,1,1,1
  985,Male,Other,1,1,1
  986,Female,Other,0,1,0
  987,Female,Gay,1,1,0
  988,Female,Striaght,0,0,0
  989,Female,Striaght,1,0,0
  990,Female,Gay,1,0,0
  991,Female,Bi,1,0,0
  992,Female,Gay,1,0,0
  993,Female,Gay,1,0,0
  994,Male,Striaght,1,1,0
  995,Female,Striaght,1,1,0
  996,Male,Gay,0,0,1
  997,Male,Striaght,1,0,0
  998,Male,Other,0,1,1
  999,Male,Gay,0,1,1
  1000,Female,Other,0,0,0</script>

  <script>
  var data;

  function bubbleChart() {
    var width = 940;
    var height = 600;

    var center = { x: width / 2, y: height / 2 };

    var forceStrength = 0.03;
    var svg = null;
    var bubbles = null;

    var simulation = d3.forceSimulation()
      .velocityDecay(0.2)
      .force('x', d3.forceX().strength(forceStrength).x(center.x))
      .force('y', d3.forceY().strength(forceStrength).y(center.y))
      .force('charge', d3.forceManyBody().strength(function(d){ return -50 * forceStrength }))
      .on('tick', function(){
        bubbles
          .attr('cx', function(d){return d.x})
          .attr('cy', function(d){return d.y});
      });

    simulation.stop();

    var fillColor = {
      'Male': '#0000ff',
      'Female': '#992222'
    };

    var chart = function chart(selector, nodes){
      nodes.forEach(function(d){
        d.x = Math.random() * width;
        d.y = Math.random() * height;
      });

      svg = d3.select(selector)
        .append('svg')
        .attr('width', width)
        .attr('height', height);

      // Bind nodes data to what will become DOM elements to represent them.
      bubbles = svg.selectAll('.bubble').data(nodes, function(d){return d.id;});

      var bubblesE = bubbles.enter().append('circle')
        .classed('bubble', true)
        .attr('r', 5)
        .attr('fill', function(d){ return fillColor[d.Gender]; })
        .attr('stroke', function(d){ return d3.rgb(fillColor[d.Gender]).darker() })
        .attr('stroke-width', 2);

      bubbles = bubbles.merge(bubblesE);
      simulation.nodes(nodes);
      chart.splitBubbles('All');
    };

    chart.splitBubbles = function(field){
      if(field === 'All'){
        svg.selectAll('.title').remove();
        simulation.force('x', d3.forceX().strength(forceStrength).x(center.x));
        simulation.alpha(1).restart();
        return;
      }
      let values = [];
      data.forEach(function(d){
        if(values.indexOf(d[field]) == -1) values.push(d[field]);
      });
      let ratio = width/(values.length + 1);
      let titles = svg.selectAll('.title').data(values);
      titles.exit().remove();
      titles.enter().append('text')
        .attr('class', 'title')
        .attr('y', 40)
        .attr('text-anchor', 'middle')
        .merge(titles)
        .attr('x', function(d){ return ratio * values.indexOf(d) + ratio })
        .text(function(d){ return d });
      simulation.force('x', d3.forceX().strength(forceStrength).x(function(d){
        return ratio * values.indexOf(d[field]) + ratio;
      }));
      simulation.alpha(1).restart();
    };

    return chart;
  }

  var myBubbleChart = bubbleChart();

  data = d3.csvParse(d3.select('#fakeinfectedpatients').html());
  myBubbleChart('#vis', data);

  d3.select('#toolbar')
    .selectAll('.button')
    .on('click', function(){
      d3.selectAll('.button').classed('active', false);
      var button = d3.select(d3.event.target);
      button.classed('active', true);
      myBubbleChart.splitBubbles(button.attr('id'));
    });
</script>
</body>
</html>
